# React Loopback Mongo

1. Mongo Runs on :27017 `./$ mongod`
1. Loopback Runs on :3000 `./$ node .`
1. React Runs on :3001 `./client_src/$ yarn start`

## Project Installation Steps

1. `git clone git@github.com:jordanblakey/react-loopback-mongo.git`
1. `cd react-loopback-mongo`
1. Start MongoDB: `mongod`
1. Monogo CLI: `mongo`
1. Start Dev Server at localhost:3000: `node .`
1. Loopback API Explorer: `http://localhost:3000/explorer/`

<hr>

## About Loopback

The project is generated by [LoopBack](http://loopback.io).

- Quickly create dynamic end-to-end REST APIs.
- Connect devices and browsers to data and services.
- Use Android, iOS, and AngularJS SDKs to easily create client apps.
- Add-on components for file management, 3rd-party login, and OAuth2.
- Runs on-premises or in the cloud

### LoopBack Commands

- `npm install -g loopback-cli`
- Init Loopback Project: `lb app <name>.`
- Create a new Loopback Model: `lb model <name>`
- Set API model permissions: `lb acl`
- Define model relations: `lb relation`
- Create a new datasource (connect to DB): `lb datasource`

### Persist Data (Node)

``` js
category.create({name: 'stationery', id: 1});
product.create({
  categoryId: 1,
  name: 'Pencil',
  price: 0.99
});
```

### Query Data (Node)

``` js
MyProduct.find({
    where: {price: {lt: 100}},
    order: 'price ASC',
    limit: 3
}, function(err, products) {
    ...
});
```

<hr>

## MongoDB

### MongoDB Setup

- Connection String: `mongodb://username:password@hostname:port/database`
- `chown -R mongod:mongod db`
- `sudo mkdir -p /data/db /data/log`

### mongod Executable Use

- `sudo service mongod start`
- `tail /var/log/mongodb/mongod.log`
- `sudo service mongod stop`
- `sudo service mongod restart`

### mongo CLI Use

- Shell: `mongo`

### MongoDB Compass GUI

https://www.mongodb.com/products/compass

### Removal

- `sudo apt-get purge mongodb-enterprise*`
- `sudo rm -r /var/log/mongodb`
- `sudo rm -r /var/lib/mongodb`

### Commands

Query into MongoDB in the 'mongo' CLI:
`show dbs`, `use <database>`, `show collections`, `db.<collection>.find()`

- `db`: Get current DB
- `show dbs`: Show all Databases
- `use <database>`: Change to/create DB
- `db.dropDatabase();`: Drop current database

- `show collections`: Show all collections
- `db.<collection>.find()`
- `db.<collection>.find().pretty(): Show up to 20 matches`
- `db["3test"].find()`, `db.getCollection: Alternate collection syntax: ("3test").find()`
- `db.myCollection.insertOne()`: Create a new collection

- `db.help()`: Show help for an db object
- `db.<collection>.help()`: Show help for an collection object
- `mongo --help:`Call help from shell
- `help`: Call help from Mongo cli

- `db.updateUser`: Show help for a method -- no parens

<hr>

## Misc Notes

### Models from Loopback CLI

``` json
{
  "name": "meetups", // Model Name
  "base": "PersistedModel",
  "idInjection": true, // Something to do with adding a unique key
  "options": {
    "validateUpsert": true
  },
  "properties": { // Key/Value definition
    "name": {
      "type": "string", // Type definition
      "required": true // Required by what?
    },
    "city": {
      "type": "string",
      "required": true
    },
    "address": {
      "type": "string"
    }
  },
  "validations": [],
  "relations": {},
  "acls": [], // Permissions
  "methods": {}
}
```